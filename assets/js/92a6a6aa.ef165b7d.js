"use strict";(self.webpackChunkbeta_BNB_Docs=self.webpackChunkbeta_BNB_Docs||[]).push([[3442],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>f});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(n),h=a,f=d["".concat(l,".").concat(h)]||d[h]||u[h]||o;return n?r.createElement(f,i(i({ref:t},p),{},{components:n})):r.createElement(f,i({ref:t},p))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:a,i[1]=s;for(var c=2;c<o;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},45122:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var r=n(87462),a=(n(67294),n(3905));const o={sidebar_label:"SP APIs",sidebar_position:2,hide_table_of_contents:!1},i="SP APIs",s={unversionedId:"greenfield/tech-specs/sp-apis",id:"greenfield/tech-specs/sp-apis",title:"SP APIs",description:"SP should provide plenty of APIs to facilitate users to look up",source:"@site/docs/greenfield/tech-specs/sp-apis.md",sourceDirName:"greenfield/tech-specs",slug:"/greenfield/tech-specs/sp-apis",permalink:"/docs/greenfield/tech-specs/sp-apis",draft:!1,editUrl:"https://github.com/bnb-chain/bnb-chain.github.io/blob/master/docs/greenfield/tech-specs/sp-apis.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_label:"SP APIs",sidebar_position:2,hide_table_of_contents:!1}},l={},c=[{value:"Universal Endpoint",id:"universal-endpoint",level:2},{value:"URI Standard",id:"uri-standard",level:3},{value:"HTTPS REST API",id:"https-rest-api",level:3},{value:"P2P RPC",id:"p2p-rpc",level:3},{value:"List Operations",id:"list-operations",level:2}],p={toc:c},d="wrapper";function u(e){let{components:t,...n}=e;return(0,a.kt)(d,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"sp-apis"},"SP APIs"),(0,a.kt)("p",null,"SP should provide plenty of APIs to facilitate users to look up\ninformation, download the objects, recover the data, and send\ntransactions onto the Greenfield blockchain. This section will be\nextended as time goes on."),(0,a.kt)("p",null,"All SPs should provide APIs listed in this section."),(0,a.kt)("h2",{id:"universal-endpoint"},"Universal Endpoint"),(0,a.kt)("h3",{id:"uri-standard"},"URI Standard"),(0,a.kt)("p",null,"All objects can be identified and accessed via a universal path:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"gnfd://\\<bucket_name\\>\\<object_name\\>*?\\[parameter\\]\n")),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"where:")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},'"gnfd://')," is the fixed leading identifier, which is mandatory*")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"bucket_name")," is the bucket name of the object, which is mandatory*")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"object_name")," is the name of the object, which is mandatory*")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"parameter")," is a list of key-value pair for the additional information for the URI, which is optional*"))),(0,a.kt)("p",null,"This path should be 1:1 mapped to an object. It is worth mentioning here that if\nwe want to refer to the same object even if it was deleted and recreated, we can\nadd the ",(0,a.kt)("inlineCode",{parentName:"p"},"If-Match-Checksum")," parameter to the URI. E.g ",(0,a.kt)("inlineCode",{parentName:"p"},"gnfd://mybucket/myobject?If-Match-Checksum=qUiQTy8PR5uPgZdpSzAYSw0u0cHNKh7A+4XSmaGSpEc="),"."),(0,a.kt)("h3",{id:"https-rest-api"},"HTTPS REST API"),(0,a.kt)("p",null,'Each SP will register multiple endpoints to access their services, e.g.\n"SP1" may ask their users to download objects via\n',(0,a.kt)("a",{parentName:"p",href:"https://greenfield.sp1.com/download"},"https://greenfield.sp1.com/download"),"."),(0,a.kt)("p",null,'The most important endpoint is the one for users to download objects. To\ndownload an object, users can just substitute the "gnfd://" in the URI\nstandard with the SP endpoint. For example, to access\ngnfd://mybucket/foo/bar.jpg, users can just visit SP1 at\n',(0,a.kt)("a",{parentName:"p",href:"https://greenfield.sp1.com/download/mybucket/foo/bar.jpg"},"https://greenfield.sp1.com/download/mybucket/foo/bar.jpg"),"."),(0,a.kt)("p",null,"When SP1 receives the request to this path, SP1 should understand the\nusers want to download the object at\n",(0,a.kt)("inlineCode",{parentName:"p"},"gnfd://mybucket/foo/bar/my-cool-object-id"),". SP1 should first get which SP is the current primary SP of this object, if it's SP1 herself, SP1\nshould start sending the data to the user; otherwise, SP1 will send an\nHTTP 302 to redirect the request to the primary SP's download endpoint."),(0,a.kt)("h3",{id:"p2p-rpc"},"P2P RPC"),(0,a.kt)("p",null,"Please note that both Greenfield blockchain full nodes (including\nvalidators) and SPs will provide P2P RPCs to access different data."),(0,a.kt)("p",null,"Greenfield blockchain full node RPC will be access points to read and\nchange the blockchain data, e.g. users can check the current block\nheight and validator set information, or send transactions to create a\nbucket."),(0,a.kt)("p",null,"SP P2P RPCs are under a different P2P protocol mostly for data reading,\nwhich is designed based on the BitTorrent protocol. Any client software\nthat wants to use this feature must build in this P2P protocol."),(0,a.kt)("p",null,"One thing to note is that Greenfield enforces permission and access\ncontrol so that the data forwarded to the P2P network should be\nencrypted with the users' public keys."),(0,a.kt)("h2",{id:"list-operations"},"List Operations"),(0,a.kt)("p",null,'There are multiple operations related to "list" some information about\nGreenfield. For example, list all objects under a bucket, list all the\nmembers in a group or list all the objects associated with a payment\naccount. These operations are usually too heavy to be supported directly\nvia a Greenfield blockchain full node RPCs. Here SPs should provide\nthese functions via corresponding APIs so that the users have a better\nexperience to store, check, download, and manage the objects.'))}u.isMDXComponent=!0}}]);