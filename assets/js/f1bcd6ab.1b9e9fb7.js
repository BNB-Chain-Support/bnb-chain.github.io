"use strict";(self.webpackChunkbeta_BNB_Docs=self.webpackChunkbeta_BNB_Docs||[]).push([[1050],{3905:(e,t,a)=>{a.d(t,{Zo:()=>l,kt:()=>f});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var d=n.createContext({}),c=function(e){var t=n.useContext(d),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},l=function(e){var t=c(e.components);return n.createElement(d.Provider,{value:t},e.children)},h="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,d=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),h=c(a),u=r,f=h["".concat(d,".").concat(u)]||h[u]||p[u]||o;return a?n.createElement(f,s(s({ref:t},l),{},{components:a})):n.createElement(f,s({ref:t},l))}));function f(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,s=new Array(o);s[0]=u;var i={};for(var d in t)hasOwnProperty.call(t,d)&&(i[d]=t[d]);i.originalType=e,i[h]="string"==typeof e?e:r,s[1]=i;for(var c=2;c<o;c++)s[c]=a[c];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},74812:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>c});var n=a(87462),r=(a(67294),a(3905));const o={sidebar_label:"The Greenfield Data Storage",sidebar_position:2,hide_table_of_contents:!1},s="The Greenfield Data Storage",i={unversionedId:"greenfield/design/data-storage",id:"greenfield/design/data-storage",title:"The Greenfield Data Storage",description:"The data stored on Greenfield has two main categories:",source:"@site/docs/greenfield/design/data-storage.md",sourceDirName:"greenfield/design",slug:"/greenfield/design/data-storage",permalink:"/docs/greenfield/design/data-storage",draft:!1,editUrl:"https://github.com/bnb-chain/bnb-chain.github.io/blob/master/docs/greenfield/design/data-storage.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_label:"The Greenfield Data Storage",sidebar_position:2,hide_table_of_contents:!1}},d={},c=[{value:"Data with Consensus",id:"data-with-consensus",level:2},{value:"Accounts and Balance",id:"accounts-and-balance",level:3},{value:"Validator and SP Metadata",id:"validator-and-sp-metadata",level:3},{value:"Storage Metadata",id:"storage-metadata",level:3},{value:"Permission Metadata",id:"permission-metadata",level:3},{value:"Billing Metadata",id:"billing-metadata",level:3},{value:"Off-Chain Payload Object Data Storage",id:"off-chain-payload-object-data-storage",level:2},{value:"Primary and Secondary SPs",id:"primary-and-secondary-sps",level:3},{value:"Data Redundancy",id:"data-redundancy",level:3}],l={toc:c},h="wrapper";function p(e){let{components:t,...a}=e;return(0,r.kt)(h,(0,n.Z)({},l,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"the-greenfield-data-storage"},"The Greenfield Data Storage"),(0,r.kt)("p",null,"The data stored on Greenfield has two main categories:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"1.")," ",(0,r.kt)("strong",{parentName:"p"},"Data with Blockchain Consensus:")," They are Greenfield blockchain data. All Greenfield validators have such active data in full (at least the latest state). Anyone can join the blockchain as full nodes to synchronize these data for free."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"2.")," ",(0,r.kt)("strong",{parentName:"p"},"Object Payload Data:")," object data for short. This is the data that users store on Greenfield. Such data has access control and requires fees to store. They are not stored on the blockchain but on enough instances of SPs off-chain."),(0,r.kt)("h2",{id:"data-with-consensus"},"Data with Consensus"),(0,r.kt)("p",null,"These data are on-chain and can be only changed through transactions\nonto the Greenfield blockchain. It has several types as described below."),(0,r.kt)("h3",{id:"accounts-and-balance"},"Accounts and Balance"),(0,r.kt)("p",null,'Each user has their "',(0,r.kt)("strong",{parentName:"p"},"Owner Address"),'" as the identifier for their owner account to "',(0,r.kt)("strong",{parentName:"p"},"own"),'" the data resources. There is another "',(0,r.kt)("strong",{parentName:"p"},"payment account"),'" type dedicated to billing and payment purposes and owned by owner addresses.'),(0,r.kt)("p",null,"Both owner accounts and payment accounts can hold the BNB balance on\nGreenfield. Users can deposit BNB from BSC, accept transfers from other users, and spend them on transaction gas and storage usage."),(0,r.kt)("h3",{id:"validator-and-sp-metadata"},"Validator and SP Metadata"),(0,r.kt)("p",null,"These are the basic information about the Greenfield validators and\nGreenfield SPs. SPs may have more information, as it has to publish\ntheir service information for users' data operations. There should be a\nreputation mechanism for SPs as well."),(0,r.kt)("h3",{id:"storage-metadata"},"Storage Metadata"),(0,r.kt)("p",null,'The "',(0,r.kt)("strong",{parentName:"p"},"storage metadata"),'" includes ',(0,r.kt)("inlineCode",{parentName:"p"},"size"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"ownership"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"checksum hashes"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"distribution location"),' among SPs. Similar to AWS S3, the basic unit of the storage is an "',(0,r.kt)("em",{parentName:"p"},"object"),'", which can be a piece of binary data, text files, photos, videos, or any other format. Users can create their objects under their "',(0,r.kt)("em",{parentName:"p"},"bucket"),'". A bucket is globally unique. The object can be referred to via the bucket name and the object ID. It can also be located by the bucket name, the prefix tag, and the object ID via off-chain facilitations.'),(0,r.kt)("h3",{id:"permission-metadata"},"Permission Metadata"),(0,r.kt)("p",null,"Data resources on Greenfield, such as the data objects and the buckets, all have access control, such as which address can create, read, list, or even execute the resources, and which address can grant/revoke these permissions."),(0,r.kt)("p",null,'Two other data resources also have access control. One is "',(0,r.kt)("strong",{parentName:"p"},"Group"),'". A\ngroup represents a group of user addresses that have the same\npermissions to the same resources. It can be used in the same way as an address in the access control. Meanwhile, it requires permission too to change the group. The other is "',(0,r.kt)("strong",{parentName:"p"},"payment account"),'". They are created by the owner accounts.'),(0,r.kt)("p",null,"Here the access control is enforced by the SPs off-chain. People can\ntest and challenge the SPs if they mess up the control. Slash and reward will happen to keep the SPs sticking to the principles."),(0,r.kt)("h3",{id:"billing-metadata"},"Billing Metadata"),(0,r.kt)("p",null,'Users have to pay fees to store data objects on Greenfield. While each object enjoys a free quota to download by users who are permitted to, the excessive download will require extra data packages to be paid for the bandwidth. Besides the owner address, users can derive multiple "',(0,r.kt)("strong",{parentName:"p"},"Payment Addresses"),'" to pay these fees. Objects are stored under buckets, while each bucket can be associated with these payment addresses, and the system will charge these accounts for storing and/or downloading. Many buckets can share the same payment address. Such association information is also stored on chains with consensus as well.'),(0,r.kt)("p",null,"The payment of Greenfield is on a stream pay model, which will greatly reduce the complexity to implement the billing logic - more described in the ",(0,r.kt)("a",{parentName:"p",href:"/docs/greenfield/tech-specs/ecosystem-players"},"Technical Specification")," section."),(0,r.kt)("h2",{id:"off-chain-payload-object-data-storage"},"Off-Chain Payload Object Data Storage"),(0,r.kt)("p",null,"The payload data of the object, i.e. the bytes comprising the data\nfiles, photos, and videos, are stored off-chain in multiple SPs with a data redundancy design. Each SP can have its edition of an object storage system with a good SLA and high-performance interface to interact with the users and other SPs."),(0,r.kt)("h3",{id:"primary-and-secondary-sps"},"Primary and Secondary SPs"),(0,r.kt)("p",null,'Among the multiple SPs that one object is stored on, one SP will be the\n"',(0,r.kt)("strong",{parentName:"p"},"Primary SP"),'", while the others are "',(0,r.kt)("strong",{parentName:"p"},"Secondary SP"),'".'),(0,r.kt)("p",null,"When users want to write an object into Greenfield, they or the client\nsoftware they use must specify the primary SP. Primary SP should be used\nas the only SP to download the data. Users can change the primary SP for\ntheir objects later if they are not satisfied with their service."),(0,r.kt)("h3",{id:"data-redundancy"},"Data Redundancy"),(0,r.kt)("p",null,'After the users issue a "write" request, Primary SP should respond to the client upload request to accept the user upload, chop the object data into segments, verify the data integrity and store all the segments.\nAfter that, Primary SP computes a data redundancy solution for these segments based on Erasure Coding (EC). Then Primary SP or the users will select a few secondary SPs to store these segment replicas and their EC parity pieces. This data distribution communication will be done via the p2p network and REST\nAPIs among SPs.\nThe data redundancy setup is to ensure that even if the primary SP and a few secondary SPs become unavailable at a later time, Greenfield can still recover the full data.'))}p.isMDXComponent=!0}}]);